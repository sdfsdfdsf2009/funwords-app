# AI Creator Now 技能文档

## 技能概览

本目录包含AI Creator Now项目的自动化技能模块，这些技能可以自动识别用户意图并执行相应的复杂任务。

## 技能列表

### 1. 需求提案自动生成技能 (requirement-proposal-generator)

**文件位置**: `src/skills/requirement-proposal-generator.ts`

**功能描述**: 当用户提出新增需求时，通过交互式对话明确需求细节后，自动生成完整的需求分析和提案文档。

**触发条件**: 用户输入包含以下任一关键词：
- "新增需求"
- "添加需求"
- "我想增加"
- "我需要新增"
- "我想添加"
- "有个新需求"
- "新增功能"
- "添加功能"

**核心特性**:
- 🗣️ **交互式需求澄清** - 通过对话收集需求细节，不自行猜测
- 📝 **智能信息提取** - 从用户回答中自动提取并更新需求字段
- 🔄 **Subagent架构** - 使用独立的需求澄清Subagent，节省主技能上下文
- ✅ **需求确认机制** - 生成需求摘要供用户确认
- 📄 **完整提案生成** - 基于确认的需求生成专业提案
- 🧹 **状态隔离** - Subagent独立管理对话状态，主技能保持轻量

**交互式工作流程**:

1. **🚀 需求接收** - 接收用户的初始需求描述
2. **🔍 缺失信息分析** - 智能识别需要澄清的信息点
3. **💬 交互式澄清** - 通过逐个问题收集需求细节：
   - 需求标题确认
   - 详细描述补充
   - 目标用户明确
   - 预期成果定义
   - 时间线确认
   - 优先级评估
   - 用户故事收集
   - 验收标准制定
4. **✅ 需求确认** - 生成完整需求摘要供用户确认
5. **🔍 多领域分析** - 智能识别需求涉及的领域并调用专业Subagents：
   - 技术领域分析（技术可行性、架构设计、实现方案）
   - 市场领域分析（市场机会、竞争环境、商业价值）
   - 用户体验分析（可用性、用户旅程、界面设计）
   - 其他领域分析（业务、法律、安全等）
6. **📊 跨领域整合** - 汇总各领域分析结果，识别协同机会和冲突点
7. **📋 产品分析** - 基于多领域洞察分析用户价值、业务影响、市场需求等
8. **💻 开发分析** - 结合技术分析评估开发可行性、工作量、技能要求等
9. **📄 提案生成** - 创建包含执行摘要、范围、交付物等的完整提案
10. **📋 OpenSpec集成** - 自动生成符合OpenSpec格式的提案文档

**对话式澄清问题示例**:
- "为了更好地理解您的需求，请给这个需求起一个简洁明确的标题（建议5-20个字）。"
- "这个需求主要针对哪些用户群体？请描述一下他们的特征和需求。"
- "您希望这个功能实现后，用户能够获得什么具体的收益或体验改善？"
- "从用户的角度来看，请描述一下用户会如何使用这个功能？可以描述几个典型的使用场景。"

**输出内容**:
- 完整的对话历史记录
- 结构化的需求数据
- **多领域专业分析报告**：
  - 技术可行性评估和架构建议
  - 市场机会分析和竞争策略
  - 用户体验评估和设计建议
  - 跨领域整合洞察
- 产品分析报告（基于多领域洞察）
- 开发可行性分析（结合技术分析结果）
- 完整项目提案（整合所有领域分析）
- OpenSpec格式文档

**使用示例**:
```
用户: 我想新增一个视频剪辑功能

系统: 🚀 启动交互式需求提案生成流程（使用Subagent）...
系统: 我收到了您的需求："我想新增一个视频剪辑功能"。为了更好地理解您的需求并生成准确的提案，我需要向您确认一些细节。
系统: 为了更好地理解您的需求，请给这个需求起一个简洁明确的标题（建议5-20个字）。

用户: 在线视频剪辑器

系统: 感谢您的回复！接下来我想了解一下：这个需求主要针对哪些用户群体？请描述一下他们的特征和需求。

用户: 主要是内容创作者，他们需要快速剪辑短视频

系统: 感谢您的回复！接下来我想了解一下：您希望这个功能实现后，用户能够获得什么具体的收益或体验改善？

[...继续交互直到信息收集完整]

系统: 非常感谢！我已经收集到足够的信息。以下是我理解的需求摘要：
[生成需求摘要]
系统: 🎯 正在进行产品分析...
系统: 💻 正在进行开发分析...
系统: 📄 正在生成完整提案...
系统: 📋 正在创建OpenSpec提案...
系统: ✅ 需求提案生成完成！
```

**Subagent架构优势**:
- **🧹 上下文隔离**: 需求澄清对话在独立的Subagent中进行，不占用主技能上下文
- **🔄 状态管理**: 每个用户的对话状态独立管理，支持并发处理
- **📊 轻量主技能**: 主技能只负责协调Subagent，保持简洁高效
- **🎯 专业化处理**: 需求澄清逻辑集中在专门Subagent中，便于维护和优化

## 技能开发指南

### 创建新技能

1. **定义技能接口**:
```typescript
export interface YourSkillInput {
  // 定义输入参数
}

export class YourSkill {
  static shouldTrigger(userInput: string): boolean {
    // 定义触发条件
  }

  static async execute(input: string): Promise<YourSkillOutput> {
    // 实现技能逻辑
  }
}
```

2. **实现触发逻辑**:
   - 定义明确的触发关键词
   - 使用自然语言处理技术识别意图
   - 确保触发条件不会过于敏感

3. **设计工作流程**:
   - 将复杂任务分解为多个步骤
   - 每个步骤都有明确的输入输出
   - 提供进度反馈和错误处理

4. **集成外部系统**:
   - 支持API调用和第三方服务
   - 遵循项目的技术栈和规范
   - 确保安全性和稳定性

5. **输出格式化**:
   - 提供结构化的输出结果
   - 支持多种输出格式（JSON、Markdown等）
   - 确保所有输出内容都是中文（遵循项目宪法）

### 技能注册

将新技能添加到技能注册表：

```typescript
// src/skills/index.ts
export { YourSkill } from './your-skill';

export const AVAILABLE_SKILLS = [
  RequirementProposalSkill,
  YourSkill,
  // ... 其他技能
];
```

### 最佳实践

1. **错误处理**: 提供友好的错误信息和恢复机制
2. **性能优化**: 避免长时间阻塞，使用异步处理
3. **用户体验**: 提供清晰的进度反馈和状态更新
4. **可测试性**: 编写单元测试和集成测试
5. **文档维护**: 保持文档与代码同步更新

## 技能使用协议

所有技能必须遵循以下协议：

1. **中文优先**: 所有输出内容必须是中文
2. **用户友好**: 提供清晰的提示和反馈
3. **错误安全**: 遇到错误时提供降级方案
4. **数据安全**: 不泄露敏感信息
5. **性能可靠**: 在合理时间内完成任务

## 贡献指南

欢迎贡献新的技能模块！请遵循以下步骤：

1. 创建技能文件
2. 实现技能逻辑
3. 编写测试用例
4. 更新文档
5. 提交Pull Request

## 技术支持

如有问题或建议，请：
1. 查看本文档
2. 检查技能源码注释
3. 联系开发团队

---

*最后更新: 2025年11月*